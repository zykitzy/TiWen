from socket import *import randomimport timeimport osHost = '10.10.1.159'Port = 1111Address = (Host, Port)i = 0j = 0isTrue = TruetemplateDate = "3E 0F 27 75 FF FF 05 85 FF FF 02 01 00 00 56 6F 3F"labelNumber = ['85 FF FF 02', '85 FF FF 03', '85 FF FF 04', '85 FF FF 05', '85 FF FF 06',               '85 FF FF 07', '85 FF FF 08', '85 FF FF 09', '85 FF FF 10', '85 FF FF 11',               '85 FF FF 12', '85 FF FF 13']Temperature = 0#random Temperaturdef TemperaturInrandom(min, max):    temp = random.randrange(min, max)    temp = bytes((temp,))    temp = [temps for temps in temp]    return temp#get random Temperaturdef getTemperatur():    temperatur = []    temperatur.append(TemperaturInrandom(23, 30).pop())    temperatur.append(TemperaturInrandom(0, 64).pop())    return temperatur#Stop Time of Senddef sleeptime(Hour, Min, sec, ms):    return Hour * 3600 + Min * 60 + sec + ms * 0.001#Send date to Addressdef sendDate():    global j, i    global isTrue    for labelNum in labelNumber:        NewTemplate = templateDate.replace("85 FF FF 02", labelNum)        for temperatures in getTemperatur():            if templateDate is not None:                if temperatures < 10:                    temperatures = '0' + str(temperatures)                NewTemplate = NewTemplate.replace("00", str(temperatures), 1)        try:            tcpCliSock.send(bytes.fromhex(NewTemplate))            print(NewTemplate)            time.sleep(sleeptime(0, 0, 0, 3))        except:            tcpCliSock.close()            print("\033[1;31m 连接被断开！\033[0m")            i = i - 1            if j != 0:                j = j - 1            isTrue = False            return isTrue        else:            j += 1try:    tcpCliSock = socket(AF_INET, SOCK_STREAM)    tcpCliSock.connect(Address)except ConnectionRefusedError or TimeoutError:    print("\033[1;31m  连接主机:" + Host + ":" + str(Port) + "失败!,请重新配置或查看网络是否正常！\033[0m")    tcpCliSock.close()    os._exit(0)else:    print("\033[0;32m 连接成功！\033[0m")while isTrue:    i += 1    if sendDate() is not False:        print("\033[0;32m 发送次数：{} 总计发包个数：{} \033[0m".format(i, j))        time.sleep(sleeptime(0, 0, 6, 0))    else:        print("\033[1;31m 发送次数：{} 总计发包个数：{} \033[0m".format(i, j))        os._exit(0)